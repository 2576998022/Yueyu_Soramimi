# 粤语转写 Agent 工作流程说明文档

## 整体架构
本系统由三个专业 Agent 协同工作，形成完整的粤语转写流水线：
1. 文本分析专家 (Stage 1)
2. 音节转换专家 (Stage 2)
3. 格式转写专家 (Stage 3)

## 工作流程图
用户输入 
   ↓
Stage 1: 文本分析
   ↓
Stage 2: 音节转换
   ↓
Stage 3: 格式转写
   ↓
最终输出

## 各阶段详细说明

### Stage 1: 文本分析阶段
职责：处理原始输入文本
输入：用户提供的原始中文文本
输出：
- 原文展示
- 分词结果
- 分词说明（复合词、空格位置等）

关键功能：
- 文本完整性验证
- 专业分词处理
- 复合词识别
- 特殊标点处理

### Stage 2: 音节转换阶段
职责：将中文转换为粤语发音
输入：Stage 1 的完整输出
输出：
- 音节对照表
- 音节分类（普通音节、入声字、特殊音）
- 发音说明

关键功能：
- 粤语发音转换
- 入声字识别
- 特殊音标注
- 连读规则说明

### Stage 3: 格式转写阶段
职责：生成最终三行式转写
输入：Stage 2 的完整输出
输出：标准三行格式
- 第一行：原文
- 第二行：空耳混合
- 第三行：全拼音

关键功能：
- 三行式格式转换
- 对齐处理
- 空格规范化
- 格式美化

## 数据流转说明

1. Stage 1 → Stage 2
传递内容：
- 完整的原文
- 准确的分词结果
- 详细的分词说明

2. Stage 2 → Stage 3
传递内容：
- 完整的音节对照
- 准确的音节分类
- 详细的发音说明

## 质量控制

1. 每阶段独立检查
   - Stage 1: 分词准确性
   - Stage 2: 发音准确性
   - Stage 3: 格式规范性

2. 阶段间检查
   - 数据完整性验证
   - 格式一致性确认
   - 特殊情况传递

## 错误处理机制

1. 阶段内错误
   - 及时发现和标注
   - 提供处理建议
   - 记录问题类型

2. 阶段间错误
   - 数据传递验证
   - 格式兼容性检查
   - 异常情况通报

## 使用建议

1. 输入要求
   - 提供完整文本
   - 说明特殊需求
   - 标注重点关注项

2. 输出说明
   - 检查完整性
   - 验证准确性
   - 确认格式规范

3. 注意事项
   - 保持输入规范
   - 关注错误提示
   - 遵循格式要求

## 维护和更新

1. 定期检查
   - 规则更新
   - 示例补充
   - 问题修正

2. 反馈处理
   - 收集用户反馈
   - 优化处理流程
   - 更新处理规则 